I"ù	<form name="form-test" method="post" data-netlify="true">


<fieldset class="field" id="course-learning">
    <legend class="label">Scheduling (Required)</legend>
    <p class="expl">Indicate the type of activities provided in this resource. Choose as many as apply.</p>
    <div class="radio-field">
        <input type="checkbox" id="course-learning-scheduled" name="course-learning-scheduled" group="learning" required="" />
        <label for="course-learning-scheduled">Scheduled - participants are required to attend at a specific time</label>
    </div>
    <div class="radio-field">
        <input type="checkbox" id="course-learning-not-scheduled" name="course-learning-not-scheduled" group="learning" />
        <label for="course-learning-not-scheduled">Unscheduled - participants can attend at their own pace</label>
    </div>
</fieldset>

<fieldset class="field" id="course-audience">
    <legend class="label">Audience (Required)</legend>
    <div class="radio-field">
      <input type="checkbox" id="course-audience-content-author" name="course-audience-content-author" group="audience" required="" />
      <label for="course-audience-content-author">Content Author</label>
    </div>
    <div class="radio-field">
      <input type="checkbox" name="course-audience-designer" id="course-audience-designer" group="audience" />
      <label for="course-audience-designer">Designer</label>
    </div>
  </fieldset>

  <button type="submit">Send information</button>

</form>

<script>
// TODO - don't want this for more than one instance of this include !!!
// Assume a single form - could add a build time check
const form = document.querySelector('form')
const submitButton = form.querySelector('button[type="submit"]')
submitButton.addEventListener('click', (event) =>
{
    const requiredCheckboxes = form.querySelectorAll('input[type="checkbox"][required][group]')
    const groups = Array.from(requiredCheckboxes).map((n) => n.getAttribute('group'))
    const uniqueGroups = [... new Set(groups)]

    uniqueGroups.forEach(groupName => {
        const checkboxs = form.querySelectorAll(`input[type="checkbox"][group="${groupName}"]`)
        const checkedCheckboxs = form.querySelectorAll(`input[type="checkbox"][group="${groupName}"]:checked`)

        // if any checkbox in the group is checked we removed required from them all
        if (checkedCheckboxs.length) {
            for (let checkbox of checkboxs) {
            checkbox.required = false;
            }
        }
    })
    
    getPreviewSubmission;
})

</script>

:ET